{"version":3,"file":"taquito-react-components.umd.js","sources":["../src/tezos-context.ts","../src/format.ts","../src/balance.tsx"],"sourcesContent":["import { TezosToolkit } from \"@taquito/taquito\";\nimport React from \"react\";\n\nexport const TezosContext = React.createContext(new TezosToolkit());\n","import BigNumber from 'bignumber.js';\nimport { Tezos } from '@taquito/taquito';\n\nconst TZ_DECIMALS = 6;\nconst MTZ_DECIMALS = 3;\n\nexport function tzFormatter(amount: string | BigNumber, format?: 'tz' | 'mtz') {\n  const bigNum = new BigNumber(amount);\n  if (bigNum.isNaN()) {\n    return amount;\n  }\n\n  if (format === 'tz') {\n    return `${Tezos.format('mutez', 'tz', amount)} ꜩ`;\n  } else if (format === 'mtz') {\n    return `${Tezos.format('mutez', 'mtz', amount)} mꜩ`;\n  } else {\n    return bigNum.toString();\n  }\n}\n","import React from 'react';\nimport { TezosContext } from './tezos-context';\nimport { tzFormatter } from './format';\n\nexport interface BalanceProps {\n  address: string;\n  format?: 'tz' | 'mtz';\n}\n\nexport class Balance extends React.Component<\n  BalanceProps,\n  { balance: string | null; error: boolean }\n  > {\n  static contextType = TezosContext;\n  constructor(props: BalanceProps) {\n    super(props);\n\n    this.state = {\n      balance: null,\n      error: false,\n    };\n  }\n\n  async refreshBalance() {\n    try {\n      // tslint:disable-next-line: deprecation\n      const balance = await this.context.tz.getBalance(this.props.address);\n      this.setState({ balance, error: false });\n    } catch (ex) {\n      this.setState({ error: true });\n    }\n  }\n\n  async componentDidMount() {\n    await this.refreshBalance();\n  }\n\n  async componentDidUpdate(prevProps: BalanceProps) {\n    if (prevProps.address !== this.props.address) {\n      await this.refreshBalance();\n    }\n  }\n\n  render() {\n    if (this.state.error) {\n      return <span>Error fetching balance</span>;\n    }\n    return <span>{tzFormatter(this.state.balance || '', this.props.format)}</span>;\n  }\n}\n"],"names":["TezosToolkit","Tezos"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAGa,YAAY,GAAG,KAAK,CAAC,aAAa,CAAC,IAAIA,oBAAY,EAAE;;aCGlD,WAAW,CAAC,MAA0B,EAAE,MAAqB;QAC3E,IAAM,MAAM,GAAG,IAAI,SAAS,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,MAAM,CAAC,KAAK,EAAE,EAAE;YAClB,OAAO,MAAM,CAAC;SACf;QAED,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAUC,aAAK,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,YAAI,CAAC;SACnD;aAAM,IAAI,MAAM,KAAK,KAAK,EAAE;YAC3B,OAAUA,aAAK,CAAC,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,MAAM,CAAC,aAAK,CAAC;SACrD;aAAM;YACL,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;SAC1B;IACH,CAAC;;;QCV4B,2BAG1B;QAED,iBAAY,KAAmB;YAA/B,YACE,kBAAM,KAAK,CAAC,SAMb;YAJC,KAAI,CAAC,KAAK,GAAG;gBACX,OAAO,EAAE,IAAI;gBACb,KAAK,EAAE,KAAK;aACb,CAAC;;SACH;QAEK,gCAAc,GAApB;;;;;;;4BAGoB,qBAAM,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAA;;4BAA9D,OAAO,GAAG,SAAoD;4BACpE,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,SAAA,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;;;;4BAEzC,IAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;;;;;;SAElC;QAEK,mCAAiB,GAAvB;;;;gCACE,qBAAM,IAAI,CAAC,cAAc,EAAE,EAAA;;4BAA3B,SAA2B,CAAC;;;;;SAC7B;QAEK,oCAAkB,GAAxB,UAAyB,SAAuB;;;;;kCAC1C,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,OAAO,CAAA,EAAxC,wBAAwC;4BAC1C,qBAAM,IAAI,CAAC,cAAc,EAAE,EAAA;;4BAA3B,SAA2B,CAAC;;;;;;SAE/B;QAED,wBAAM,GAAN;YACE,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;gBACpB,OAAO,2DAAmC,CAAC;aAC5C;YACD,OAAO,kCAAO,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAQ,CAAC;SAChF;QAnCM,mBAAW,GAAG,YAAY,CAAC;QAoCpC,cAAC;KAxCD,CAA6B,KAAK,CAAC,SAAS;;;;;;;;;;;;;"}