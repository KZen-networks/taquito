{"version":3,"file":"taquito-react-components.es5.js","sources":["../src/tezos-context.ts","../src/format.ts","../src/balance.tsx"],"sourcesContent":["import { TezosToolkit } from \"@taquito/taquito\";\nimport React from \"react\";\n\nexport const TezosContext = React.createContext(new TezosToolkit());\n","import BigNumber from 'bignumber.js';\nimport { Tezos } from '@taquito/taquito';\n\nconst TZ_DECIMALS = 6;\nconst MTZ_DECIMALS = 3;\n\nexport function tzFormatter(amount: string | BigNumber, format?: 'tz' | 'mtz') {\n  const bigNum = new BigNumber(amount);\n  if (bigNum.isNaN()) {\n    return amount;\n  }\n\n  if (format === 'tz') {\n    return `${Tezos.format('mutez', 'tz', amount)} ꜩ`;\n  } else if (format === 'mtz') {\n    return `${Tezos.format('mutez', 'mtz', amount)} mꜩ`;\n  } else {\n    return bigNum.toString();\n  }\n}\n","import React from 'react';\nimport { TezosContext } from './tezos-context';\nimport { tzFormatter } from './format';\n\nexport interface BalanceProps {\n  address: string;\n  format?: 'tz' | 'mtz';\n}\n\nexport class Balance extends React.Component<\n  BalanceProps,\n  { balance: string | null; error: boolean }\n  > {\n  static contextType = TezosContext;\n  constructor(props: BalanceProps) {\n    super(props);\n\n    this.state = {\n      balance: null,\n      error: false,\n    };\n  }\n\n  async refreshBalance() {\n    try {\n      // tslint:disable-next-line: deprecation\n      const balance = await this.context.tz.getBalance(this.props.address);\n      this.setState({ balance, error: false });\n    } catch (ex) {\n      this.setState({ error: true });\n    }\n  }\n\n  async componentDidMount() {\n    await this.refreshBalance();\n  }\n\n  async componentDidUpdate(prevProps: BalanceProps) {\n    if (prevProps.address !== this.props.address) {\n      await this.refreshBalance();\n    }\n  }\n\n  render() {\n    if (this.state.error) {\n      return <span>Error fetching balance</span>;\n    }\n    return <span>{tzFormatter(this.state.balance || '', this.props.format)}</span>;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGa,YAAY,GAAG,KAAK,CAAC,aAAa,CAAC,IAAI,YAAY,EAAE;;SCGlD,WAAW,CAAC,MAA0B,EAAE,MAAqB;IAC3E,IAAM,MAAM,GAAG,IAAI,SAAS,CAAC,MAAM,CAAC,CAAC;IACrC,IAAI,MAAM,CAAC,KAAK,EAAE,EAAE;QAClB,OAAO,MAAM,CAAC;KACf;IAED,IAAI,MAAM,KAAK,IAAI,EAAE;QACnB,OAAU,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,YAAI,CAAC;KACnD;SAAM,IAAI,MAAM,KAAK,KAAK,EAAE;QAC3B,OAAU,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,MAAM,CAAC,aAAK,CAAC;KACrD;SAAM;QACL,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;KAC1B;AACH,CAAC;;;ICV4B,2BAG1B;IAED,iBAAY,KAAmB;QAA/B,YACE,kBAAM,KAAK,CAAC,SAMb;QAJC,KAAI,CAAC,KAAK,GAAG;YACX,OAAO,EAAE,IAAI;YACb,KAAK,EAAE,KAAK;SACb,CAAC;;KACH;IAEK,gCAAc,GAApB;;;;;;;wBAGoB,qBAAM,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAA;;wBAA9D,OAAO,GAAG,SAAoD;wBACpE,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,SAAA,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;;;;wBAEzC,IAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;;;;;;KAElC;IAEK,mCAAiB,GAAvB;;;;4BACE,qBAAM,IAAI,CAAC,cAAc,EAAE,EAAA;;wBAA3B,SAA2B,CAAC;;;;;KAC7B;IAEK,oCAAkB,GAAxB,UAAyB,SAAuB;;;;;8BAC1C,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,OAAO,CAAA,EAAxC,wBAAwC;wBAC1C,qBAAM,IAAI,CAAC,cAAc,EAAE,EAAA;;wBAA3B,SAA2B,CAAC;;;;;;KAE/B;IAED,wBAAM,GAAN;QACE,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;YACpB,OAAO,2DAAmC,CAAC;SAC5C;QACD,OAAO,kCAAO,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAQ,CAAC;KAChF;IAnCM,mBAAW,GAAG,YAAY,CAAC;IAoCpC,cAAC;CAxCD,CAA6B,KAAK,CAAC,SAAS;;;;"}